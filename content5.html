<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="css/content/content5.css" />
  </head>
  <body id="background" class="content5">
    <header>
      <div id="header-count-range">
        <p class="header-count">남은시간</p>
        <p class="header-count" id="header-sec">100초</p>
      </div>
    </header>
    <main>
      <div class="main-hp-range">
        <div>
          <ul class="main-hp-ul">
            <li id="hp1" class="my-main-hp">hp</li>
            <li id="hp2" class="my-main-hp">hp</li>
            <li id="hp3" class="my-main-hp">hp</li>
          </ul>
        </div>
      </div>
      <div class="main-word-range">
        <div id="main-word-ul">
          <p class="main-word"></p>
        </div>
      </div>

      <div id="main-text-center">
        <div id="main-text-range">
          <p id="main-text-p">입력:</p>
          <form>
            <input type="text" id="main-text" />
          </form>
        </div>
      </div>
    </main>
  </body>
  <script>
    const words = [
      "사람",
      "시간",
      "공기",
      "사랑",
      "바다",
      "나무",
      "산",
      "별",
      "도시",
      "음식",
      "꿈",
      "가족",
      "친구",
      "책",
      "뵑뵒뵔뵓",
      "뵑뵒뵔뵓",
      "뵑뵒뵔뵓",
      "뵑뵒뵔뵓",
      "뵑뵒뵔뵓",
      "강아지",
      "고양이",
      "집",
      "손",
      "마음",
      "길",
      "학교",
      "선생님",
      "학생",
      "자동차",
      "컴퓨터",
      "강",
      "꽃",
      "음악",
      "영화",
      "이야기",
      "의자",
      "우산",
    ];

    const mainWord = document.querySelector(".main-word");
    const form = document.querySelector("form");
    const text = document.querySelector("#main-text");
    const hpul = document.querySelector(".main-hp-ul");
    let hpcount = 3;
    let sec = 100;
    let level = 3000;

    function setInnerText() {
      let random = words[Math.floor(Math.random() * words.length)];
      mainWord.innerText = random;
      console.log("바뀜");
      console.log(random);
    }

    function CreateHp() {
      const newli = document.createElement("li");
      newli.className = "my-main-hp";
      const newtext = document.createTextNode("hp");
      hpcount++;
      newli.id = "hp" + hpcount;
      newli.appendChild(newtext);
      hpul.appendChild(newli);
    }

    function RemoveHp() {
      const removeli = document.getElementById("hp" + hpcount);
      console.log(removeli);
      hpcount--;
      removeli.remove();
    }
    function countTimer() {
      if (sec !== 0) {
        sec--;
      } else {
        console.log("Gamewin");
        location.reload(true);
      }
      document.getElementById("header-sec").innerText = sec;
    }

    setInnerText();
    setInterval(countTimer, 1000);
    setInterval(RemoveHp, 3000);

    form.addEventListener("submit", function (e) {
      e.preventDefault();
      let userText = text.value;

      if (mainWord.innerText === userText) {
        console.log("같음");
        setInnerText();
        CreateHp();
      } else {
        console.log("다름");
        RemoveHp();
      }
      console.log(hpcount);
      if (hpcount == 0) {
        console.log("GameOver");
        location.reload(true);
      }
      text.value = "";
    });
  </script>
</html>
