<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Auto Play Music</title>
    <link rel="stylesheet" href="./css/content/content2.css" />
  </head>
  <body class="main-inner main_body">
    <audio id="backgroundMusic" autoplay loop>
      <source src="./images/background-music.mp3" type="audio/mpeg" />
    </audio>
    <button id="playButton" class="main_function_button_style_playmusic">
      Play Music
    </button>

    <script>
      const music = document.getElementById("backgroundMusic");
      const playButton = document.getElementById("playButton");

      music
        .play()
        .then(() => {})
        .catch(() => {
          playButton.style.display = "block";
          playButton.addEventListener("click", function () {
            music.play();
            playButton.style.display = "none"; // 音乐播放后隐藏按钮
          });
        });
    </script>

    <div class="video-background">
      <video autoplay muted loop id="bg-video">
        <source src="./images/background_1.mp4" type="video/mp4" />
      </video>
    </div>

    <div class="overlay-content">
      <div class="main_head-container">
        <div class="main_head_logo_rotate">
          <img src="./images/Logo.jpg" class="main_head_logo_img" />
        </div>
      </div>
      <div class="main_turns_button-container">
        <li class="main_turns_button"><span id="turns">0</span></li>
      </div>
      <div>
        <ul class="main_show_button-container">
          <li class="main_show_button" id="min-value"><h1>1</h1></li>
          <li class="main_show_symbol">&lt</li>
          <li class="main_show_input_button">
            <input type="number" id="guess-input" placeholder="" readonly />
          </li>
          <li class="main_show_symbol">&lt</li>
          <li class="main_show_button" id="max-value"><h1>100</h1></li>
        </ul>
      </div>
      <div>
        <ul class="main_function_button-container">
          <li class="main_function_button">
            <button
              class="main_function_button_style_reset"
              onclick="resetGame()"
            >
              Restart
            </button>
          </li>
          <li class="main_function_button">
            <button
              class="main_function_button_style_guess"
              onclick="checkGuess()"
            >
              Guess
            </button>
          </li>
          <li class="main_function_button">
            <button
              class="main_function_button_style_clear"
              onclick="clearInput()"
            >
              Clear
            </button>
          </li>
        </ul>
      </div>
      <div>
        <ul class="main_number_button-container">
          <li
            class="main_number_button"
            style="background-color: rgb(184, 80, 45)"
            onclick="appendNumber(0)"
          >
            0
          </li>
          <li
            class="main_number_button"
            style="background-color: rgb(179, 137, 45)"
            onclick="appendNumber(1)"
          >
            1
          </li>
          <li
            class="main_number_button"
            style="background-color: rgb(210, 207, 53)"
            onclick="appendNumber(2)"
          >
            2
          </li>
          <li
            class="main_number_button"
            style="background-color: rgb(36, 142, 52)"
            onclick="appendNumber(3)"
          >
            3
          </li>
          <li
            class="main_number_button"
            style="background-color: rgb(42, 163, 169)"
            onclick="appendNumber(4)"
          >
            4
          </li>
          <li
            class="main_number_button"
            style="background-color: rgb(68, 105, 224)"
            onclick="appendNumber(5)"
          >
            5
          </li>
          <li
            class="main_number_button"
            style="background-color: rgb(179, 60, 218)"
            onclick="appendNumber(6)"
          >
            6
          </li>
          <li
            class="main_number_button"
            style="background-color: rgb(166, 199, 48)"
            onclick="appendNumber(7)"
          >
            7
          </li>
          <li
            class="main_number_button"
            style="background-color: rgb(52, 162, 196)"
            onclick="appendNumber(8)"
          >
            8
          </li>
          <li
            class="main_number_button"
            style="background-color: rgb(229, 108, 52)"
            onclick="appendNumber(9)"
          >
            9
          </li>
        </ul>
      </div>
    </div>

    <script>
      // 生成 1 到 100 的随机数
      let randomNumber = Math.floor(Math.random() * 100) + 1;
      let turns = 0;
      let min = 1;
      let max = 100;

      function checkGuess() {
        // 获取用户输入的数字
        const guess = parseInt(document.getElementById("guess-input").value);
        if (isNaN(guess) || guess <= min || guess >= max) {
          clearInput();
          //alert("Please enter a number between " + min + " and " + max);
          return;
        }

        // 更新尝试次数
        turns++;
        document.getElementById("turns").textContent = turns;

        if (guess < randomNumber) {
          min = guess;
          document.getElementById("min-value").innerHTML = `<h1>${min}</h1>`;
        } else if (guess > randomNumber) {
          max = guess;
          document.getElementById("max-value").innerHTML = `<h1>${max}</h1>`;
        } else {
          fetch("guessnumber_modal.html")
            .then((response) => response.text())
            .then((data) => {
              document.body.insertAdjacentHTML("beforeend", data);
              document.getElementById("modal").style.display = "block";
              document.getElementById("turns-count").innerText = turns;
              document
                .querySelector(".close")
                .addEventListener("click", closeModal);

              function closeModal() {
                document.getElementById("modal").style.display = "none";
                document.getElementById("modal").remove();
              }

              resetGame();
            });
        }
        clearInput();
      }

      function resetGame() {
        randomNumber = Math.floor(Math.random() * 100) + 1;
        turns = 0;
        min = 1;
        max = 100;
        document.getElementById("min-value").innerHTML = `<h1>${min}</h1>`;
        document.getElementById("max-value").innerHTML = `<h1>${max}</h1>`;
        document.getElementById("turns").textContent = turns;
      }

      function clearInput() {
        document.getElementById("guess-input").value = "";
      }

      function appendNumber(number) {
        const inputField = document.getElementById("guess-input");

        if (inputField.value.length < 2) {
          inputField.value = inputField.value + number;
        }
      }
    </script>
  </body>
</html>
